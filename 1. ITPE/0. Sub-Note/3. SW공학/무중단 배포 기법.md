#SW공학 #배포 #DevOps #필수

## 정의
서비스 중단 없는 배포, 무중단 배포
- 시스템 중단 없이 새 버전을 배포하는 기법
- 24시간 서비스 가용성 보장
## 키워드
- Rolling, Blue-Green, Canary, Feature Toggle, Shadow
- 무중단, Zero-Downtime, 점진적 배포
- Load Balancer, 트래픽 전환, 롤백
- CI/CD, DevOps, 지속적 배포
## 암기법
- 5대 기법: 롤블카피섀 (Rolling-Blue/Green-Canary-Feature-Shadow)
- 자원 많이 필요: 블섀 (Blue-Green, Shadow)
- 위험 낮음: 블카피섀 (Blue-Green-Canary-Feature-Shadow)
## 구성도
```
[Rolling Deployment]

서버1 서버2 서버3 서버4
 V1    V1    V1    V1     (초기)
 V2    V1    V1    V1     (1단계)
 V2    V2    V1    V1     (2단계)
 V2    V2    V2    V1     (3단계)
 V2    V2    V2    V2     (완료)

[Blue-Green Deployment]

      Load Balancer
           │
    ┌──────┴──────┐
    ▼             ▼
┌────────┐    ┌────────┐
│ Blue   │    │ Green  │
│ (V1)   │    │ (V2)   │ ← 배포
└────────┘    └────────┘
 트래픽 100%   트래픽 0%

전환 후:
 트래픽 0%    트래픽 100%

[Canary Deployment]

배포 단계별 트래픽 비율:

Stage 1:  V1(95%) | V2(5%)
Stage 2:  V1(90%) | V2(10%)
Stage 3:  V1(75%) | V2(25%)
Stage 4:  V1(50%) | V2(50%)
Stage 5:  V1(0%)  | V2(100%)

[Feature Toggle]

코드:
if (feature_toggle.is_enabled("new_feature")):
    new_feature()
else:
    old_feature()

단계:
1. 코드 배포 (기능 off)
2. 소수 사용자 on (테스트)
3. 점진적 확대
4. 전체 on
5. 구 코드 제거

[배포 기법 비교]

기법        │ 자원   │ 위험   │ 속도   │ 복잡도
────────────┼────────┼────────┼────────┼────────
Rolling     │ 1x     │ 중     │ 느림   │ 낮음
Blue-Green  │ 2x     │ 낮음   │ 빠름   │ 중간
Canary      │ 1x     │ 매우낮 │ 느림   │ 높음
Toggle      │ 1x     │ 낮음   │ 빠름   │ 높음
Shadow      │ 2x     │ 낮음   │ 느림   │ 매우높음
```
## 연관 토픽
- [[소프트웨어 리팩토링]] - 코드 개선
- [[클라우드 감리]] - 클라우드 배포
- [[BCM]] - 비즈니스 연속성
- [[디지털 전환(DX)]] - 지속적 배포
- [[DevOps]] - 데브옵스
- [[CI, CD]] - 지속적 배포
- [[MSA와 Monolithic Architecture]]
## 주요 배포 기법
| 기법 | 설명 |
|-----|------|
| Rolling | 순차적 인스턴스 교체 |
| Blue-Green | 2개 환경, 트래픽 전환 |
| Canary | 일부 트래픽만 신버전 |
| Feature Toggle | 기능 스위치로 On/Off |
| Shadow | 신버전 트래픽 미러링 |
## 기법별 특징
| 기법             | 장점     | 단점      |
| -------------- | ------ | ------- |
| Rolling        | 자원 효율  | 배포 시간 김 |
| Blue-Green     | 빠른 롤백  | 2배 자원   |
| Canary         | 위험 최소화 | 모니터링 복잡 |
| Feature Toggle | 즉시 제어  | 코드 복잡   |
## 리버스 프록시
- **역할**: 로드밸런서 앞단에서 트래픽 제어
- **기능**: 서버 정보 은닉, 부하 분산
