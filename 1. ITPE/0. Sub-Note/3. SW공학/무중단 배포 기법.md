=======================
무중단 배포 기법의 종류(Zero-Downtime Deployment Techniques)

#SW공학 #배포 #DevOps

- [ ] 1회
- [ ] 2회
- [ ] 3회
- [ ] 4회
- [ ] 5회

## 정의
서비스 중단 없는 배포, 무중단 배포
- 서비스 중단 시간(Downtime) 없이 새로운 버전을 배포하는 기법
- 사용자 경험을 유지하면서 지속적으로 시스템을 업데이트하는 DevOps 핵심 전략

## 구성요소
### 1. Rolling Deployment(롤링 배포)
- 일부 서버씩 순차적으로 교체
- 장점: 단순, 자원 효율적
- 단점: 배포 시간 길음, 버전 혼재
- 적용: 일반 웹 서비스

### 2. Blue-Green Deployment
- 동일한 환경 2개(Blue/Green) 준비
- Green에 배포 후 트래픽 전환
- 장점: 빠른 롤백, 안전
- 단점: 2배 자원 필요, 데이터 동기화
- 적용: 중요 서비스, 대규모 배포

### 3. Canary Deployment(카나리 배포)
- 소수 사용자에게 먼저 배포 (1~10%)
- 문제 없으면 점진적 확대
- 장점: 위험 최소화, A/B 테스트 가능
- 단점: 모니터링 복잡, 긴 배포 시간
- 적용: 고위험 변경, 신기능 검증

### 4. Feature Toggle(기능 토글)
- 코드는 배포하되 기능은 off
- 토글로 기능 on/off 제어
- 장점: 즉시 롤백, 점진적 공개
- 단점: 코드 복잡도 증가, 토글 관리
- 적용: 실험적 기능, A/B 테스트

### 5. Shadow Deployment(섀도우 배포)
- 실제 트래픽을 새 버전에 복제
- 사용자에게 영향 없이 테스트
- 장점: 실제 환경 검증
- 단점: 자원 2배, 복잡도
- 적용: 성능 검증, 중요 시스템

## 구성도
```
[Rolling Deployment]

서버1 서버2 서버3 서버4
 V1    V1    V1    V1     (초기)
 V2    V1    V1    V1     (1단계)
 V2    V2    V1    V1     (2단계)
 V2    V2    V2    V1     (3단계)
 V2    V2    V2    V2     (완료)

[Blue-Green Deployment]

      Load Balancer
           │
    ┌──────┴──────┐
    ▼             ▼
┌────────┐    ┌────────┐
│ Blue   │    │ Green  │
│ (V1)   │    │ (V2)   │ ← 배포
└────────┘    └────────┘
 트래픽 100%   트래픽 0%

전환 후:
 트래픽 0%    트래픽 100%

[Canary Deployment]

배포 단계별 트래픽 비율:

Stage 1:  V1(95%) | V2(5%)
Stage 2:  V1(90%) | V2(10%)
Stage 3:  V1(75%) | V2(25%)
Stage 4:  V1(50%) | V2(50%)
Stage 5:  V1(0%)  | V2(100%)

[Feature Toggle]

코드:
if (feature_toggle.is_enabled("new_feature")):
    new_feature()
else:
    old_feature()

단계:
1. 코드 배포 (기능 off)
2. 소수 사용자 on (테스트)
3. 점진적 확대
4. 전체 on
5. 구 코드 제거

[배포 기법 비교]

기법        │ 자원   │ 위험   │ 속도   │ 복잡도
────────────┼────────┼────────┼────────┼────────
Rolling     │ 1x     │ 중     │ 느림   │ 낮음
Blue-Green  │ 2x     │ 낮음   │ 빠름   │ 중간
Canary      │ 1x     │ 매우낮 │ 느림   │ 높음
Toggle      │ 1x     │ 낮음   │ 빠름   │ 높음
Shadow      │ 2x     │ 낮음   │ 느림   │ 매우높음
```

## 키워드
- Rolling, Blue-Green, Canary, Feature Toggle, Shadow
- 무중단, Zero-Downtime, 점진적 배포
- Load Balancer, 트래픽 전환, 롤백
- CI/CD, DevOps, 지속적 배포

## 암기법
- 5대 기법: 롤블카피섀 (Rolling-Blue/Green-Canary-Feature-Shadow)
- 자원 많이 필요: 블섀 (Blue-Green, Shadow)
- 위험 낮음: 블카피섀 (Blue-Green-Canary-Feature-Shadow)

## 연관 토픽
- [[소프트웨어 리팩토링]] - 코드 개선
- [[클라우드 감리]] - 클라우드 배포
