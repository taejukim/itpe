=======================
소프트웨어 리팩토링(Software Refactoring)

#SW공학 #유지보수 #코드개선

- [ ] 1회
- [ ] 2회
- [ ] 3회
- [ ] 4회
- [ ] 5회

## 정의
외부 동작 유지한 코드 개선, 리팩토링
- 소프트웨어의 외부 동작은 변경하지 않으면서 내부 구조를 개선하는 작업
- 코드 가독성, 유지보수성, 확장성을 향상시켜 기술 부채(Technical Debt) 해결

## 구성요소
### 리팩토링 목적
- 코드 가독성 향상
- 중복 코드 제거
- 복잡도 감소
- 유지보수성 개선
- 버그 발견 용이
- 개발 속도 향상

### 리팩토링 시점
- 3의 규칙(Rule of Three): 3번 반복되면 리팩토링
- 기능 추가 전: 코드 구조 개선 후 기능 추가
- 버그 수정 시: 코드 이해를 위해 리팩토링
- 코드 리뷰 시: 개선 포인트 발견

### 주요 리팩토링 기법
- Extract Method(메서드 추출): 긴 함수를 작은 함수로 분리
- Rename(이름 변경): 의미 있는 이름으로 변경
- Move Method(메서드 이동): 적절한 클래스로 이동
- Extract Class(클래스 추출): 하나의 클래스를 여러 개로 분리
- Inline Method(메서드 인라인): 불필요한 메서드 제거
- Replace Conditional with Polymorphism: 조건문을 다형성으로 대체
- Introduce Parameter Object: 매개변수를 객체로 통합
- Remove Dead Code: 사용하지 않는 코드 삭제

### 리팩토링 원칙
- 작은 단계로 진행
- 각 단계마다 테스트
- 기능 변경 금지
- 자동화 도구 활용

## 구성도
```
[리팩토링 프로세스]

1. Code Smell 식별
   ├─ 긴 메서드
   ├─ 큰 클래스
   ├─ 중복 코드
   ├─ 긴 매개변수 목록
   └─ 복잡한 조건문

2. 테스트 코드 작성
   └─ 기존 동작 검증

3. 리팩토링 수행
   └─ 작은 단계로 개선

4. 테스트 실행
   └─ 동작 변경 없음 확인

5. 반복
   └─ 지속적 개선

[Before/After 예시]

Before (Long Method):
```
def process_order(order):
    # 100줄의 복잡한 코드
    # 주문 검증
    # 재고 확인
    # 결제 처리
    # 배송 준비
```

After (Extract Method):
```
def process_order(order):
    validate_order(order)
    check_inventory(order)
    process_payment(order)
    prepare_shipping(order)
```

[Code Smell 유형]

1. Bloaters (비대화)
   - Long Method
   - Large Class
   - Long Parameter List

2. Object-Orientation Abusers
   - Switch Statements
   - Temporary Field

3. Change Preventers (변경 방해)
   - Divergent Change
   - Shotgun Surgery

4. Dispensables (불필요)
   - Dead Code
   - Duplicate Code
   - Lazy Class

5. Couplers (결합)
   - Feature Envy
   - Inappropriate Intimacy

[리팩토링 도구]

Java: IntelliJ IDEA, Eclipse
JavaScript: VS Code, WebStorm
Python: PyCharm, VS Code
```

## 키워드
- Extract Method, Rename, Move Method
- Code Smell, Technical Debt, 가독성
- 3의 규칙, 작은 단계, 테스트
- Martin Fowler, 지속적 개선

## 암기법
- 목적: 가중복유 (가독성-중복제거-복잡도-유지보수)
- 기법 3대: 추출-이름-이동 (Extract-Rename-Move)
- 원칙: 작테기자 (작은단계-테스트-기능유지-자동화)

## 연관 토픽
- [[3R]] - 리엔지니어링
- [[Lehman 소프트웨어 변화]] - 소프트웨어 진화
- [[회귀 테스트]] - 변경 후 테스트
